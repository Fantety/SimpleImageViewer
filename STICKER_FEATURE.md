# 贴纸功能使用说明

## 功能概述
贴纸功能允许用户在当前图片上添加其他图片作为贴纸，支持位置调整、大小调整和旋转。

## 界面布局
- **左侧**: 图片预览区域，显示基础图片和所有贴纸
- **右侧**: 控制面板和贴纸列表
  - 顶部：添加贴纸按钮
  - 底部：贴纸列表，显示所有已添加的贴纸

## 使用步骤

1. **打开图片**: 首先需要打开一张基础图片
2. **点击贴纸按钮**: 在工具栏中点击"添加贴纸"按钮（星星图标）
3. **选择贴纸图片**: 在右侧面板点击"选择图片作为贴纸"按钮，选择要作为贴纸的图片文件
4. **管理贴纸**:
   - 在右侧贴纸列表中点击贴纸项目来选择
   - 在左侧预览区域中直接点击贴纸来选择
   - 在贴纸列表中点击×按钮删除贴纸
5. **调整贴纸**:
   - 拖拽贴纸移动位置
   - 拖拽四角的控制点调整大小
   - 拖拽顶部的旋转控制点旋转贴纸
   - 在预览区域点击贴纸右上角的×删除贴纸
6. **保存结果**: 点击"保存"覆盖原图，或点击"保存副本"创建新文件

## 技术实现

### 前端组件
- `StickerDialog.tsx`: 贴纸编辑对话框
- `StickerDialog.css`: 样式文件
- `StickerIcon.tsx`: 贴纸按钮图标

### 后端API
- `apply_stickers`: Rust函数，将贴纸合成到基础图片上

### 数据结构
```typescript
interface StickerData {
  id: string;
  imageData: string; // Base64编码的图片数据
  originalDataUrl: string; // 完整的data URL用于显示
  x: number; // X坐标
  y: number; // Y坐标
  width: number; // 宽度
  height: number; // 高度
  rotation: number; // 旋转角度（度）
  zIndex: number; // 图层顺序
}
```

## 支持的图片格式
- PNG
- JPEG
- GIF
- BMP
- WEBP
- TIFF
- ICO
- AVIF

## 注意事项
1. 贴纸按添加顺序叠加，后添加的在上层
2. 旋转目前支持90度的倍数
3. 贴纸会被调整到指定尺寸，可能会改变宽高比
4. 保存时会将所有贴纸合成到基础图片上